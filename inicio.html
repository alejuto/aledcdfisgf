<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Nuestro Universo - 3 Meses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    body, html { 
      margin: 0; padding: 0; width: 100%; height: 100%; 
      overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; 
    }
    #matrix-canvas {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; pointer-events: none; opacity: 0.3;
    }
    #viewport {
      position: relative; z-index: 1; width: 100vw; height: 100vh;
      perspective: 2000px; display: flex; justify-content: center; align-items: center;
      touch-action: none;
    }
    #universe {
      position: relative; transform-style: preserve-3d; will-change: transform;
    }

    /* SATURNO */
    .saturn-container {
      position: absolute; width: 220px; height: 220px;
      transform-style: preserve-3d; transform: translate3d(-50%, -50%, 0);
    }
    .sphere-layer {
      position: absolute; width: 100%; height: 100%; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ffcc00 45%, #ff4400 75%, #661100);
      box-shadow: 0 0 60px #ffcc00;
    }
    .rings {
      position: absolute; top: 50%; left: 50%; width: 440px; height: 440px;
      margin-left: -220px; margin-top: -220px; border-radius: 50%;
      border: 18px double rgba(255, 170, 0, 0.7); transform: rotateX(75deg);
    }

    /* FRASES EN SATURNO (AJUSTADAS) */
    .texto-saturno-centro {
      position: absolute; top: 50%; left: 50%; width: 200px;
      padding: 12px; background: rgba(0,0,0,0.8); border-radius: 12px;
      color: #fff; font-size: 15px; font-weight: bold; text-align: center;
      box-shadow: 0 0 20px #ffcc00; border: 2px solid #ffcc00;
      /* Se quita el transform de aqu√≠ para manejarlo en JS */
    }
    .texto-saturno-superior {
      position: absolute; bottom: 280px; left: 50%;
      color: #fff; font-size: 22px; font-weight: bold; white-space: nowrap;
      text-transform: uppercase; letter-spacing: 2px;
      text-shadow: 0 0 15px #ff69b4, 0 0 30px #9400d3;
    }

    /* FOTOS Y MENSAJES */
    .foto-container {
      position: fixed; width: 150px; height: 150px; z-index: 200;
      opacity: 0; transition: opacity 0.6s ease; pointer-events: none;
    }
    .foto-esquina {
      width: 100%; height: 100%; object-fit: cover; border: 4px solid #fff;
      border-radius: 15px; box-shadow: 0 0 25px #ff1493;
    }
    #mensaje-final {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      width: 80%; max-width: 450px; background: rgba(0,0,0,0.95);
      color: white; padding: 25px; border-radius: 20px; border: 2px solid #ffcc00;
      text-align: center; z-index: 300; display: none; opacity: 0;
      transition: opacity 1s ease; box-shadow: 0 0 50px #ffcc00;
    }

    .reason {
      position: absolute; white-space: nowrap; color: #fff; font-size: 13px;
      text-shadow: 0 0 8px #ffcc00; transform-style: preserve-3d; font-weight: bold;
    }
    .star-particle { position: absolute; background: #fff; border-radius: 50%; }
    .smoke-particle { position: absolute; border-radius: 50%; filter: blur(10px); animation: drift 1.5s forwards; }
    @keyframes drift { 0% { transform: scale(0.5); opacity: 1; } 100% { transform: scale(3.5) translate(var(--dx), var(--dy)); opacity: 0; } }
  </style>
</head>
<body>

  <canvas id="matrix-canvas"></canvas>
  <audio id="musica" src="music/amor.mp3" loop></audio>

  <div id="cont1" class="foto-container" style="top: 20px; left: 20px;"><img class="foto-esquina" src="img/foto1.jpg"></div>
  <div id="cont2" class="foto-container" style="top: 20px; right: 20px;"><img class="foto-esquina" src="img/foto2.jpg"></div>
  <div id="cont3" class="foto-container" style="bottom: 80px; left: 20px;"><img class="foto-esquina" src="img/foto3.jpg"></div>
  <div id="cont4" class="foto-container" style="bottom: 80px; right: 20px;"><img class="foto-esquina" src="img/foto4.jpg"></div>
  <div id="cont5" class="foto-container" style="top: 15%; left: 50%; transform: translateX(-50%);"><img class="foto-esquina" src="img/foto5.jpg"></div>

  <div id="mensaje-final">
    <h2 style="color: #ffcc00;">Mi amor lindo... ‚ù§Ô∏è</h2>
    <p>
      Quer√≠a decirte que feliz y 3 meses. <br><br>
      <b>LE DOY GRACIAS A DIOS PPRIEMRO QUE TODO ,PORQUE GRACIAS A EL TE PUEDE CONOCER AMOR LINDO POR HABERME ,  ENVIADO A TU VIDA MI AMOR LINDO Y TU A MI VIDA A AMOR ,</b>, <br>
      QUE EL SE√ëOR Y MAMITA MAR√çA NOS SIGA BENDICIENDO... MUCHO MAS Y QUE PODAMOS VIVIR MUCHO MOMENTOS JUNTO A TI CELEBRANDO TODO TUS LOGROS ,NUNCA OLVIDES QUE TE AMOR MUCHO MUCHO  üòáü•πü•∞üòòü•≥
    </p>
  </div>

  <div id="viewport">
    <div id="universe">
      <div class="saturn-container">
        <div class="sphere-layer"></div>
        <div class="sphere-layer" style="transform: rotateY(90deg)"></div>
        <div class="rings"></div>
        
        <div id="saturnCentro" class="texto-saturno-centro">200 razones por la cual te amo mi amor lindo ‚ù§Ô∏è</div>
        <div id="saturnSuperior" class="texto-saturno-superior">ERES Y SER√ÅS MI UNIVERSO</div>
      </div>
    </div>
  </div>

  <script src="js/reasons.js"></script>
  <script>
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;

    // MATRIX
    const drops = Array(Math.floor(canvas.width / 250)).fill(0);
    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.1)"; ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.font = "16px Arial";
      for (let i = 0; i < drops.length; i++) {
        ctx.fillStyle = i % 2 === 0 ? "#ff69b4" : "#9400d3"; 
        ctx.fillText("FELIZ 3 MESES MI AMOR LINDO ü´ß‚ù§Ô∏è‚Äçü©πüòò", i * 250, drops[i] * 18);
        if (drops[i] * 18 > canvas.height && Math.random() > 0.98) drops[i] = 0;
        drops[i] += 0.3;
      }
    }

    // UNIVERSO ELEMENTOS
    const universe = document.getElementById('universe');
    reasons.forEach((text, i) => {
      const el = document.createElement('div'); el.className = 'reason'; el.textContent = text;
      const phi = Math.acos(-1 + (2 * i) / reasons.length);
      const theta = Math.sqrt(reasons.length * Math.PI) * phi;
      const r = 650;
      el.dataset.x = r * Math.cos(theta) * Math.sin(phi);
      el.dataset.y = r * Math.sin(theta) * Math.sin(phi);
      el.dataset.z = r * Math.cos(phi);
      universe.appendChild(el);
    });

    for(let i=0; i<600; i++) {
      const p = document.createElement('div'); p.className = 'star-particle';
      const r = 800 + Math.random() * 1000;
      const theta = Math.random() * Math.PI * 2; const phi = Math.random() * Math.PI;
      p.style.width = p.style.height = '2px';
      p.style.transform = `translate3d(${r * Math.sin(phi) * Math.cos(theta)}px, ${r * Math.sin(phi) * Math.sin(theta)}px, ${r * Math.cos(phi)}px)`;
      universe.appendChild(p);
    }

    // ZOOM Y 360
    let scale = 0.5, rotX = -15, rotY = 0;
    let isDragging = false, lastX, lastY;

    window.addEventListener('wheel', (e) => {
      scale += e.deltaY * -0.0005;
      scale = Math.max(0.2, Math.min(scale, 2.5));
    });

    const startDrag = (e) => { isDragging = true; lastX = e.clientX || e.touches[0].clientX; lastY = e.clientY || e.touches[0].clientY; document.getElementById('musica').play().catch(()=>{}); };
    window.addEventListener('mousedown', startDrag); window.addEventListener('touchstart', startDrag);
    window.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      let x = e.clientX; let y = e.clientY;
      rotY += (x - lastX) * 0.2; rotX -= (y - lastY) * 0.2;
      lastX = x; lastY = y;
    });
    window.addEventListener('mouseup', () => isDragging = false); window.addEventListener('touchend', () => isDragging = false);

    // SECUENCIA √öNICA
    let fotoActual = 1;
    function crearHumo(cont) {
      for(let i=0; i<15; i++){
        const s = document.createElement('div'); s.className='smoke-particle';
        s.style.width = s.style.height = '35px';
        s.style.background = Math.random()>0.5 ? '#ff1493' : '#9400d3';
        s.style.setProperty('--dx', (Math.random()-0.5)*200+'px');
        s.style.setProperty('--dy', (Math.random()-0.5)*200+'px');
        cont.appendChild(s); setTimeout(()=>s.remove(), 1500);
      }
    }

    function iniciarFotos() {
      if (fotoActual <= 5) {
        const cont = document.getElementById('cont' + fotoActual);
        crearHumo(cont);
        cont.style.opacity = '1';
        setTimeout(() => { cont.style.opacity = '0'; fotoActual++; setTimeout(iniciarFotos, 400); }, 3000);
      } else {
        const msg = document.getElementById('mensaje-final');
        msg.style.display = 'block'; setTimeout(() => msg.style.opacity = '1', 50);
        for(let i=1; i<=5; i++) document.getElementById('cont' + i).style.opacity = '1';
        setTimeout(() => {
          msg.style.opacity = '0'; for(let i=1; i<=5; i++) document.getElementById('cont' + i).style.opacity = '0';
          setTimeout(() => { msg.style.display = 'none'; }, 1000);
        }, 5000);
      }
    }
    setTimeout(iniciarFotos, 2500);

    function render() {
      drawMatrix();
      if (!isDragging) rotY += 0.05;
      universe.style.transform = `scale(${scale}) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      
      const invRot = `translate(-50%, -50%) rotateY(${-rotY}deg) rotateX(${-rotX}deg)`;
      
      // LA FRASE DEL CENTRO AHORA TIENE translateZ(180px) PARA QUE NUNCA SE META DENTRO DEL PLANETA
      document.getElementById('saturnCentro').style.transform = invRot + ` translateZ(180px)`;
      
      document.getElementById('saturnSuperior').style.transform = `translate(-50%, 0) rotateY(${-rotY}deg) rotateX(${-rotX}deg)`;

      document.querySelectorAll('.reason').forEach(el => {
        el.style.transform = `translate3d(${el.dataset.x}px, ${el.dataset.y}px, ${el.dataset.z}px) rotateY(${-rotY}deg) rotateX(${-rotX}deg)`;
      });
      requestAnimationFrame(render);
    }
    render();
  </script>
</body>
</html>